# Java æ•°æ®ç±»å‹å¸¸è§é¢è¯•é¢˜æ€»ç»“

è¿™ç¯‡æ–‡ç« ç»å¯¹å¹²è´§ï¼**æ–‡ç« æ¶‰åŠåˆ°çš„æ¦‚å¿µç»å¸¸ä¼šè¢«é¢è¯•å®˜æ‹¿æ¥è€ƒå¯Ÿæ±‚èŒè€…çš„ Java åŸºç¡€ã€‚**



æœ¬ç¯‡é‡‡ç”¨å¤§å®¶æ¯”è¾ƒå–œæ¬¢çš„é¢è¯•å®˜é—®ç­”çš„å½¢å¼æ¥å±•å¼€ã€‚



## åŸºæœ¬æ•°æ®ç±»å‹


ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š Java ä¸­æœ‰å“ª 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼šJava ä¸­æœ‰ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼š



1. 6 ç§æ•°å­—ç±»å‹ ï¼š`byte`ã€`short`ã€`int`ã€`long`ã€`float`ã€`double`
2. 1 ç§å­—ç¬¦ç±»å‹ï¼š`char`
3. 1 ç§å¸ƒå°”å‹ï¼š`boolean`ã€‚



ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š å®ƒä»¬çš„é»˜è®¤å€¼å’Œå ç”¨çš„ç©ºé—´å¤§å°çŸ¥é“ä¸ï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼šè¿™ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ä»¥åŠæ‰€å ç©ºé—´çš„å¤§å°å¦‚ä¸‹ï¼š

| åŸºæœ¬ç±»å‹ | ä½æ•° | å­—èŠ‚ | é»˜è®¤å€¼ |
| --- | --- | --- | --- |
| `int` | 32 | 4 | 0 |
| `short` | 16 | 2 | 0 |
| `long` | 64 | 8 | 0L |
| `byte` | 8 | 1 | 0 |
| `char` | 16 | 2 | 'u0000' |
| `float` | 32 | 4 | 0f |
| `double` | 64 | 8 | 0d |
| `boolean` | 1 | | false |




å¦å¤–ï¼Œå¯¹äº `boolean`ï¼Œå®˜æ–¹æ–‡æ¡£æœªæ˜ç¡®å®šä¹‰ï¼Œå®ƒä¾èµ–äº JVM å‚å•†çš„å…·ä½“å®ç°ã€‚é€»è¾‘ä¸Šç†è§£æ˜¯å ç”¨ 1 ä½ï¼Œä½†æ˜¯å®é™…ä¸­ä¼šè€ƒè™‘è®¡ç®—æœºé«˜æ•ˆå­˜å‚¨å› ç´ ã€‚



**æ³¨æ„ï¼š**



1. Java é‡Œä½¿ç”¨ `long` ç±»å‹çš„æ•°æ®ä¸€å®šè¦åœ¨æ•°å€¼åé¢åŠ ä¸Š **L**ï¼Œå¦åˆ™å°†ä½œä¸ºæ•´å‹è§£æï¼š
2. `char a = 'h'`char :å•å¼•å·ï¼Œ`String a = "hello"` :åŒå¼•å·



## åŒ…è£…ç±»å‹


ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š è¯´è¯´è¿™ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹ã€‚



ğŸ™‹ **æˆ‘** ï¼šè¿™å…«ç§åŸºæœ¬ç±»å‹éƒ½æœ‰å¯¹åº”çš„åŒ…è£…ç±»åˆ†åˆ«ä¸ºï¼š`Byte`ã€`Short`ã€`Integer`ã€`Long`ã€`Float`ã€`Double`ã€`Character`ã€`Boolean`



ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼šé‚£åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹æœ‰å•¥åŒºåˆ«ä¸ï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼š



+ **ç”¨é€”**ï¼šé™¤äº†å®šä¹‰ä¸€äº›å¸¸é‡å’Œå±€éƒ¨å˜é‡ä¹‹å¤–ï¼Œæˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹æ¯”å¦‚æ–¹æ³•å‚æ•°ã€å¯¹è±¡å±æ€§ä¸­å¾ˆå°‘ä¼šä½¿ç”¨åŸºæœ¬ç±»å‹æ¥å®šä¹‰å˜é‡ã€‚å¹¶ä¸”ï¼ŒåŒ…è£…ç±»å‹å¯ç”¨äºæ³›å‹ï¼Œè€ŒåŸºæœ¬ç±»å‹ä¸å¯ä»¥ã€‚
+ **å­˜å‚¨æ–¹å¼**ï¼šåŸºæœ¬æ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡å­˜æ”¾åœ¨ Java è™šæ‹Ÿæœºæ ˆä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼ˆæœªè¢« `static` ä¿®é¥° ï¼‰å­˜æ”¾åœ¨ Java è™šæ‹Ÿæœºçš„å †ä¸­ã€‚åŒ…è£…ç±»å‹å±äºå¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“å‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹éƒ½å­˜åœ¨äºå †ä¸­ã€‚
+ **å ç”¨ç©ºé—´**ï¼šç›¸æ¯”äºåŒ…è£…ç±»å‹ï¼ˆå¯¹è±¡ç±»å‹ï¼‰ï¼Œ åŸºæœ¬æ•°æ®ç±»å‹å ç”¨çš„ç©ºé—´å¾€å¾€éå¸¸å°ã€‚
+ **é»˜è®¤å€¼**ï¼šæˆå‘˜å˜é‡åŒ…è£…ç±»å‹ä¸èµ‹å€¼å°±æ˜¯ `null` ï¼Œè€ŒåŸºæœ¬ç±»å‹æœ‰é»˜è®¤å€¼ä¸”ä¸æ˜¯ `null`ã€‚
+ **æ¯”è¾ƒæ–¹å¼**ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œ`==` æ¯”è¾ƒçš„æ˜¯å€¼ã€‚å¯¹äºåŒ…è£…æ•°æ®ç±»å‹æ¥è¯´ï¼Œ`==` æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚æ‰€æœ‰æ•´å‹åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨ `equals()` æ–¹æ³•ã€‚



**ä¸ºä»€ä¹ˆè¯´æ˜¯å‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹éƒ½å­˜åœ¨äºå †ä¸­å‘¢ï¼Ÿ** è¿™æ˜¯å› ä¸º HotSpot è™šæ‹Ÿæœºå¼•å…¥äº† JIT ä¼˜åŒ–ä¹‹åï¼Œä¼šå¯¹å¯¹è±¡è¿›è¡Œé€ƒé€¸åˆ†æï¼Œå¦‚æœå‘ç°æŸä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸åˆ°æ–¹æ³•å¤–éƒ¨ï¼Œé‚£ä¹ˆå°±å¯èƒ½é€šè¿‡æ ‡é‡æ›¿æ¢æ¥å®ç°æ ˆä¸Šåˆ†é…ï¼Œè€Œé¿å…å †ä¸Šåˆ†é…å†…å­˜



âš ï¸ æ³¨æ„ï¼š**åŸºæœ¬æ•°æ®ç±»å‹å­˜æ”¾åœ¨æ ˆä¸­æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯åŒºï¼** åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡å¦‚æœæ²¡æœ‰è¢« `static` ä¿®é¥°çš„è¯ï¼ˆä¸å»ºè®®è¿™ä¹ˆä½¿ç”¨ï¼Œåº”è¯¥è¦ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼‰ï¼Œå°±å­˜æ”¾åœ¨å †ä¸­ã€‚



```java
class BasicTypeVar{
  private int x;
}
```

### åŒ…è£…ç±»å‹çš„å¸¸é‡æ± æŠ€æœ¯


ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š åŒ…è£…ç±»å‹çš„å¸¸é‡æ± æŠ€æœ¯äº†è§£ä¹ˆï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼š Java åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»çš„å¤§éƒ¨åˆ†éƒ½å®ç°äº†å¸¸é‡æ± æŠ€æœ¯ã€‚



`Byte`,`Short`,`Integer`,`Long` è¿™ 4 ç§åŒ…è£…ç±»é»˜è®¤åˆ›å»ºäº†æ•°å€¼ **[-128ï¼Œ127]** çš„ç›¸åº”ç±»å‹çš„ç¼“å­˜æ•°æ®ï¼Œ`Character` åˆ›å»ºäº†æ•°å€¼åœ¨[0,127]èŒƒå›´çš„ç¼“å­˜æ•°æ®ï¼Œ`Boolean` ç›´æ¥è¿”å› `True` Or `False`ã€‚



**Integer ç¼“å­˜æºç ï¼š**



```java
/**
* åˆ©ç”¨ IntegerCache ç±»å®ç°äº†å¯¹æŒ‡å®šèŒƒå›´å†…æ•´æ•°å¯¹è±¡çš„ç¼“å­˜ã€‚
* é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç¼“å­˜èŒƒå›´æ˜¯ -128 åˆ° 127ï¼ˆåŒ…å«è¾¹ç•Œå€¼ï¼‰ã€‚
*/
public static Integer valueOf(int i) {
    if (i >= IntegerCache.low && i <= IntegerCache.high)
      return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
}
private static class IntegerCache {
    static final int low = -128;
    static final int high;
    static final Integer cache[];
}
```



`**Character**`** ç¼“å­˜æºç :**



```java
public static Character valueOf(char c) {
    if (c <= 127) { // must cache
      return CharacterCache.cache[(int)c];
    }
    return new Character(c);
}

private static class CharacterCache {
    private CharacterCache(){}

    static final Character cache[] = new Character[127 + 1];
    static {
        for (int i = 0; i < cache.length; i++)
            cache[i] = new Character((char)i);
    }
}
```



`**Boolean**`** ç¼“å­˜æºç ï¼š**



```java
public static Boolean valueOf(boolean b) {
    return (b ? TRUE : FALSE);
}
```



å¦‚æœè¶…å‡ºå¯¹åº”èŒƒå›´ä»ç„¶ä¼šå»åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œç¼“å­˜çš„èŒƒå›´åŒºé—´çš„å¤§å°åªæ˜¯åœ¨æ€§èƒ½å’Œèµ„æºä¹‹é—´çš„æƒè¡¡ã€‚



ä¸¤ç§æµ®ç‚¹æ•°ç±»å‹çš„åŒ…è£…ç±» `Float`,`Double` å¹¶æ²¡æœ‰å®ç°å¸¸é‡æ± æŠ€æœ¯ã€‚



```java
Integer i1 = 33;
Integer i2 = 33;
System.out.println(i1 == i2);// è¾“å‡º true
Float i11 = 333f;
Float i22 = 333f;
System.out.println(i11 == i22);// è¾“å‡º false
Double i3 = 1.2;
Double i4 = 1.2;
System.out.println(i3 == i4);// è¾“å‡º false
```



ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é—®é¢˜ã€‚ä¸‹é¢çš„ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ `true` è¿˜æ˜¯ `flase` å‘¢ï¼Ÿ



```java
Integer i1 = 40;
Integer i2 = new Integer(40);
System.out.println(i1==i2);
```



`Integer i1=40` è¿™ä¸€è¡Œä»£ç ä¼šå‘ç”Ÿè£…ç®±ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™è¡Œä»£ç ç­‰ä»·äº `Integer i1=Integer.valueOf(40)` ã€‚å› æ­¤ï¼Œ`i1` ç›´æ¥ä½¿ç”¨çš„æ˜¯å¸¸é‡æ± ä¸­çš„å¯¹è±¡ã€‚è€Œ`Integer i2 = new Integer(40)` ä¼šç›´æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚



å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ `false` ã€‚ä½ ç­”å¯¹äº†å—ï¼Ÿ



è®°ä½ï¼š**æ‰€æœ‰æ•´å‹åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨ equals æ–¹æ³•æ¯”è¾ƒ**ã€‚



![1624285912175-2a8e75e5-5948-423c-b148-6679eb024beb.png](./img/vEKj8qvOM6cjGyaa/1624285912175-2a8e75e5-5948-423c-b148-6679eb024beb-455802.png)



### ä¸ºä»€ä¹ˆè¦æœ‰åŒ…è£…ç±»å‹ï¼Ÿ


ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š ä¸ºä»€ä¹ˆè¦æœ‰åŒ…è£…ç±»å‹ï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼š



Java æœ¬èº«å°±æ˜¯ä¸€é—¨ OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰è¯­è¨€ï¼Œå¯¹è±¡å¯ä»¥è¯´æ˜¯ Java çš„çµé­‚ã€‚



é™¤äº†å®šä¹‰ä¸€äº›å¸¸é‡å’Œå±€éƒ¨å˜é‡ä¹‹å¤–ï¼Œæˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹æ¯”å¦‚æ–¹æ³•å‚æ•°ã€å¯¹è±¡å±æ€§ä¸­å¾ˆå°‘ä¼šä½¿ç”¨åŸºæœ¬ç±»å‹æ¥å®šä¹‰å˜é‡ã€‚



**ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ**



æˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ä½ æœ‰ä¸€ä¸ªå¯¹è±¡ä¸­çš„å±æ€§ä½¿ç”¨äº† åŸºæœ¬ç±»å‹ï¼Œé‚£è¿™ä¸ªå±æ€§å°±å¿…ç„¶å­˜åœ¨é»˜è®¤å€¼äº†ã€‚è¿™ä¸ªé€»è¾‘ä¸æ­£ç¡®çš„ï¼å› ä¸ºå¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå¯¹è±¡çš„æŸäº›å±æ€§æ²¡æœ‰èµ‹å€¼ï¼Œæˆ‘å°±å¸Œæœ›å®ƒçš„å€¼ä¸º nullã€‚ä½ ç»™æˆ‘é»˜è®¤èµ‹ä¸ªå€¼ï¼Œä¸æ˜¯å¸®å€’å¿™ä¹ˆï¼Ÿ



å¦å¤–ï¼Œåƒæ³›å‹å‚æ•°ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ã€‚å› ä¸ºåŸºæœ¬ç±»å‹ä¸æ˜¯ `Object` å­ç±»ï¼Œåº”è¯¥ç”¨åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹ä»£æ›¿ã€‚æˆ‘ä»¬ç›´æ¥æ‹¿ JDK ä¸­çº¿ç¨‹çš„ä»£ç ä¸¾ä¾‹ã€‚



Java ä¸­çš„é›†åˆåœ¨å®šä¹‰ç±»å‹çš„æ—¶å€™ä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹çš„ã€‚æ¯”å¦‚ï¼š



```java
public class HashMap<K,V> extends AbstractMap<K,V>
    implements Map<K,V>, Cloneable, Serializable {
}

Map<Integer, Set<String>> map = new HashMap<>();
```



## è‡ªåŠ¨æ‹†è£…ç®±


### ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±ï¼ŸåŸç†ï¼Ÿ


ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±ï¼ŸåŸç†äº†è§£ä¹ˆï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼š



åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹ä¹‹é—´çš„äº’è½¬ã€‚ä¸¾ä¾‹ï¼š



```java
Integer i = 10;  //è£…ç®±
int n = i;   //æ‹†ç®±
```



ä¸Šé¢è¿™ä¸¤è¡Œä»£ç å¯¹åº”çš„å­—èŠ‚ç ä¸ºï¼š



```java
   L1
    LINENUMBER 8 L1
    ALOAD 0
    BIPUSH 10
    INVOKESTATIC java/lang/Integer.valueOf (I)Ljava/lang/Integer;
    PUTFIELD AutoBoxTest.i : Ljava/lang/Integer;
   L2
    LINENUMBER 9 L2
    ALOAD 0
    ALOAD 0
    GETFIELD AutoBoxTest.i : Ljava/lang/Integer;
    INVOKEVIRTUAL java/lang/Integer.intValue ()I
    PUTFIELD AutoBoxTest.n : I
    RETURN
```



ä»å­—èŠ‚ç ä¸­ï¼Œæˆ‘ä»¬å‘ç°è£…ç®±å…¶å®å°±æ˜¯è°ƒç”¨äº† åŒ…è£…ç±»çš„`valueOf()`æ–¹æ³•ï¼Œæ‹†ç®±å…¶å®å°±æ˜¯è°ƒç”¨äº† `xxxValue()`æ–¹æ³•ã€‚



å› æ­¤ï¼Œ



+ `Integer i = 10` ç­‰ä»·äº `Integer i = Integer.valueOf(10)`
+ `int n = i` ç­‰ä»·äº `int n = i.intValue()`;



### è‡ªåŠ¨æ‹†ç®±å¼•å‘çš„ NPE é—®é¢˜


ğŸ‘¨â€ğŸ’»**é¢è¯•å®˜** ï¼š è‡ªåŠ¨æ‹†ç®±å¯èƒ½ä¼šå¼•å‘ NPE é—®é¢˜ï¼Œé‡åˆ°è¿‡ç±»ä¼¼çš„åœºæ™¯ä¹ˆï¼Ÿ



ğŸ™‹ **æˆ‘** ï¼š



#### æ¡ˆä¾‹ 1


åœ¨ã€Šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œã€‹ä¸Šå°±æœ‰è¿™æ ·ä¸€æ¡è§„å®šã€‚



![1624285912192-daf314da-d5e2-482d-9f40-2e3b31adb49d.png](./img/vEKj8qvOM6cjGyaa/1624285912192-daf314da-d5e2-482d-9f40-2e3b31adb49d-171542.png)



æˆ‘ä»¬ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€æ¡æ˜¯è¿™æ ·è¯´çš„ï¼šâ€œ**æ•°æ®åº“çš„æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯ nullï¼Œå› ä¸ºè‡ªåŠ¨æ‹†ç®±ï¼Œç”¨åŸºæœ¬æ•°æ®ç±»å‹æ¥æ”¶æœ‰ NPE é£é™©**â€ã€‚



æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®é™…çš„æ¡ˆä¾‹ï¼š



```java
public class AutoBoxTest {
    @Test
    void  should_Throw_NullPointerException(){
        long id = getNum();
    }
    public Long getNum(){
        return null;
    }
}
```



è¿è¡Œä»£ç ä¹‹åï¼Œæœç„¶å‡ºç°äº† **NPE** çš„é—®é¢˜ã€‚



**ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢?** æˆ‘ä»¬å¯¹ `AutoBoxTest.class` è¿›è¡Œåç¼–è¯‘æŸ¥çœ‹å…¶å­—èŠ‚ç ï¼ˆæˆ‘æ›´æ¨èä½¿ç”¨ IDEA æ’ä»¶ jclasslib æ¥æŸ¥çœ‹ç±»çš„å­—èŠ‚ç ï¼‰ã€‚



```bash
javap -c AutoBoxTest.class
```



åç¼–è¯‘åå¾—åˆ°çš„ `should_Throw_NullPointerException()` æ–¹æ³•çš„å­—èŠ‚ç å¦‚ä¸‹ï¼š



```java
0 aload_0
1 invokevirtual #2 <AutoBoxTest.getNum>
4 invokevirtual #3 <java/lang/Long.longValue>
7 lstore_1
8 return
```



æˆ‘ä»¬å¯ä»¥å‘ç°è‡ªåŠ¨æ‹†ç®± `Long` -> `long` çš„è¿‡ç¨‹ï¼Œä¸è¿‡æ˜¯è°ƒç”¨äº† `longValue()` æ–¹æ³•ç½¢äº†ï¼



```java
public long longValue() {
   return value;
}
```



ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢ä¸¤è¡Œçš„ä»£ç å®é™…æ˜¯ç­‰ä»·çš„:



```java
long id = getNum();
long id = getNum().longValue();
```



å› ä¸ºï¼Œ`getNum()`è¿”å›çš„å€¼ä¸º `null` ï¼Œä¸€ä¸ª `null` å€¼è°ƒç”¨æ–¹æ³•ï¼Œå½“ç„¶ä¼šæœ‰ **NPE** çš„é—®é¢˜äº†ã€‚



#### æ¡ˆä¾‹ 2


é€šè¿‡ä¸Šé¢çš„åˆ†æä¹‹åï¼Œæˆ‘æ¥è€ƒäº†ä¸€ä¸ªä¸è®ºæ˜¯å¹³æ—¶å¼€å‘è¿˜æ˜¯é¢è¯•ä¸­éƒ½ç»å¸¸ä¼šç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼šâ€œ**ä¸‰ç›®è¿ç®—ç¬¦ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´è¯¡å¼‚çš„ NPE å¼‚å¸¸**â€ã€‚



è¯·ä½ å›ç­”ä¸‹é¢çš„ä»£ç ä¼šæœ‰ **NPE** é—®é¢˜å‡ºç°å—ï¼Ÿå¦‚æœæœ‰ NPE é—®é¢˜å‡ºç°çš„è¯ï¼ŒåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½ ä¼šæ€ä¹ˆåˆ†æå‘¢ï¼Ÿ



```java
public class Main {
    public static void main(String[] args) {
        Integer i = null;
        Boolean flag = false;
        System.out.println(flag ? 0 : i);
    }
}
```



ç­”æ¡ˆæ˜¯ä¼šæœ‰ NPE é—®é¢˜å‡ºç°çš„ã€‚



æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡æŸ¥çœ‹å…¶å­—èŠ‚ç æ¥ææ‡‚èƒŒåçš„åŸç†ï¼ˆè¿™é‡Œå€ŸåŠ©äº† IDEA æ’ä»¶ jclasslib æ¥æŸ¥çœ‹ç±»å­—èŠ‚ç ï¼‰ã€‚



![1624285913100-280c06f4-36ec-4f80-98af-38d51097abba.png](./img/vEKj8qvOM6cjGyaa/1624285913100-280c06f4-36ec-4f80-98af-38d51097abba-972390.png)



ä»å­—èŠ‚ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œ22 è¡Œçš„ä½ç½®å‘ç”Ÿäº† **æ‹†ç®±æ“ä½œ** ã€‚



è¯¦ç»†è§£é‡Šä¸‹å°±æ˜¯ï¼š`flag ? 0 : i` è¿™è¡Œä»£ç ä¸­ï¼Œ0 æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ intï¼Œè¿”å›æ•°æ®çš„æ—¶å€™ i ä¼šè¢«å¼ºåˆ¶æ‹†ç®±æˆ int ç±»å‹ï¼Œç”±äº i çš„å€¼æ˜¯ nullï¼Œå› æ­¤å°±æŠ›å‡ºäº† NPE å¼‚å¸¸ã€‚



```java
Integer i = null;
Boolean flag = false;
System.out.println(flag ? 0 : i);
```



å¦‚æœï¼Œæˆ‘ä»¬æŠŠä»£ç ä¸­ `flag` å˜é‡çš„å€¼ä¿®æ”¹ä¸º true çš„è¯ï¼Œå°±ä¸ä¼šå­˜åœ¨ NPE é—®é¢˜äº†ï¼Œå› ä¸ºä¼šç›´æ¥è¿”å› 0ï¼Œä¸ä¼šè¿›è¡Œæ‹†ç®±æ“ä½œã€‚



æˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­åº”è¯¥é¿å…è¿™æ ·çš„å†™æ³•ï¼Œæ­£ç¡® âœ… ä¿®æ”¹ä¹‹åçš„ä»£ç å¦‚ä¸‹ï¼š



```java
Integer i = null;
Boolean flag = false;
System.out.println(flag ? new Integer(0) : i);// ä¸¤è€…ç±»å‹ä¸€è‡´å°±ä¸ä¼šæœ‰æ‹†ç®±å¯¼è‡´çš„ NPE é—®é¢˜äº†
```



è¿™ä¸ªé—®é¢˜ä¹Ÿåœ¨ ã€Šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œã€‹ä¸­ è¢«æåˆ°è¿‡ã€‚



![1624285912066-d03243a6-6f20-4bc8-ba95-35df9cc2ecf0.png](./img/vEKj8qvOM6cjGyaa/1624285912066-d03243a6-6f20-4bc8-ba95-35df9cc2ecf0-934466.png)



> æ›´æ–°: 2023-10-09 20:17:53  
> åŸæ–‡: <https://www.yuque.com/snailclimb/mf2z3k/ng3x4o>